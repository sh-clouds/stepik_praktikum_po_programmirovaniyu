Пирамидальная сортировка

Отсортируйте данный массив. Используйте пирамидальную сортировку.

Входные данные
Первая строка входных данных содержит количество элементов в массиве N,  N  ≤  105. Далее задаются N целых чисел, не превосходящих по абсолютной величине 109.

Выходные данные
Выведите эти числа в порядке неубывания.

Sample Input:
5
5 4 3 2 1

Sample Output:
1 2 3 4 5

Напишите программу. Тестируется через stdin → stdout
Верно решили 155 учащихся
Из всех попыток 61% верных


# ruby
def tbot(m, i, n)  
    if (l = 2 * (im = i) + 1) < n and m[l] > m[im] 
        im = l
    end   

    if (r = 2 * i + 2) < n and m[r] > m[im]
        im = r
    end
    
    if i != im
        m[i], m[im] = m[im], m[i]
        tbot(m, im, n)
    end
end    
  
n = gets.to_i
m = gets.chomp.split().map{|j| j.to_i}

(n-2).downto(0) do |i|
    tbot(m, i, n)   
end

(n-1).downto(1) do |i|
    m[0], m[i] = m[i], m[0]
    tbot(m, 0, i)
end    

print m.join(" ") 


# python
def tbot(i, n):  
    if (l := 2 * (im := i) + 1) < n and m[l] > m[im]: im = l
    if (r := 2 * i + 2) < n and m[r] > m[im]: im = r
    if i != im:
        m[i], m[im] = m[im], m[i]
        tbot(im, n)
        
n, m = int(input()), list(map(int, input().split()))
for i in range(n - 2, -1, -1): 
    tbot(i, n)
for i in range(n - 1, 0, -1):
    m[0], m[i] = m[i], m[0]
    tbot(0, i)
print(*m)


# C#
using System;

namespace STEPIK_C_SHARP
{
    class MainProgram
    {
        public static void Sort(int[] arr)
        {
            int n = arr.Length;
                        
            for (int i = n / 2 - 1; i >= 0; i--)
                Heapify(arr, n, i);
                        
            for (int i = n - 1; i >= 0; i--)
            {
                int temp = arr[0];
                arr[0] = arr[i];
                arr[i] = temp;

                Heapify(arr, i, 0);
            }
        }

        static void Heapify(int[] arr, int n, int i)
        {
            int largest = i;
            
            int l = 2 * i + 1; 
            int r = 2 * i + 2; 

            if (l < n && arr[l] > arr[largest])
                largest = l;

            if (r < n && arr[r] > arr[largest])
                largest = r;

            if (largest != i)
            {
                int swap = arr[i];
                arr[i] = arr[largest];
                arr[largest] = swap;

                Heapify(arr, n, largest);
            }
        }

        static void PrintArray(int[] arr)
        {
            int n = arr.Length;
            for (int i = 0; i < n; ++i)
                Console.Write(arr[i] + " ");
        }

        public static void Main()
        {
            int n = Convert.ToInt32(Console.ReadLine());
            string[] temp = Console.ReadLine().Split();

            int[] numbers = new int[n];
            for (int i = 0; i < temp.Length; i++)
                numbers[i] = Convert.ToInt32(temp[i]);

            Sort(numbers);
            PrintArray(numbers);
        }
    }
}


# java
import java.util.Arrays;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        input.nextLine();

        int[] array = Arrays.stream(input.nextLine().split("\\s+")).mapToInt(Integer::parseInt).toArray();

        heapSort(array);
        printTheArray(array);
    }

    public static void heapSort(int array[]) {
        int n = array.length;

        for (int a = n / 2 - 1; a >= 0; a--) {
            heapUp(array, n, a);
        }

        for (int b = n - 1; b > 0; b--) {
            int temporary = array[0];
            array[0] = array[b];
            array[b] = temporary;

            heapUp(array, b, 0);
        }
    }

    public static void heapUp(int[] array, int num, int i) {
        int biggest = i;
        int left = 2 * i + 1;
        int right = 2 * i + 2;

        if (left < num && array[left] > array[biggest]) {
            biggest = left;
        }

        if (right < num && array[right] > array[biggest]) {
            biggest = right;
        }

        if (biggest != i) {
            int swap = array[i];
            array[i] = array[biggest];
            array[biggest] = swap;

            heapUp(array, num, biggest);
        }
    }

    private static void printTheArray(int[] someArray) {
        for (int z = 0; z < someArray.length; z++) {
            if (z < someArray.length - 1) System.out.print(someArray[z] + " ");
            else System.out.println(someArray[z]);
        }
    }
}







