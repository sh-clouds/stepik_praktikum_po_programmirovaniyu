Большой сдвиг

Дан список из N (1≤N≤100000) целых чисел и число K (|K|<100000). Циклически сдвиньте список на |K| элементов вправо, если K – положительное и влево, если отрицательное число.

Входные данные
Программа получает на вход список целых чисел, затем число K.

Выходные данные
Выведите ответ на задачу.

Примечание
Решение должно иметь сложность O(N), то есть не должно зависеть от K. Дополнительным списком пользоваться нельзя.

Sample Input:
5 3 7 4 6
3

Sample Output:
7 4 6 5 3

Напишите программу. Тестируется через stdin → stdout
Верно решили 223 учащихся
Из всех попыток 46% верных


# ruby
a = gets.chomp.split().map{|j| j.to_i}
k = gets.to_i

#a = [1, 2, 3, 4, 5, 6, 7]
#k = 9

#a = [5, 3, 7, 4, 6]
#k = 3

#a = [5, 3, 7, 4, 6, 9]
#k = -3

ind = k % a.size
#puts ind
if (ind)  
    a = a[a.size - ind..] + a[0...a.size - ind]    
end     
puts a.join(" ")


#  python
from collections import deque

lst = list(map(int, input().split()))
delta = int(input())
dq = deque(lst)
dq.rotate(delta)
print(*dq)



# JS
var stdin = process.openStdin();

stdin.addListener("data", function(d) {
    let str = d.toString().split('\n');
    let k = +str[1];
    str = str[0].split(' ');
    k = k%str.length;
    if (k<0) k = str.length+k; 
    for (let i=0; i<k; i++) 
        str.unshift(str.pop());
    
    let result = '';
    for (let key of str) result = result + key + ' ';
    console.log(result);
  });
  


# java
import java.util.*;

public class Main {
  public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String[] str = sc.nextLine().split(" ");
    int k = sc.nextInt();
    if (k > 0) {
      if (k > str.length) k -= str.length;
      for (int j = str.length - k; j < str.length; j++) {
        System.out.print(str[j] + " ");
        str[j] = "m";
      }
    }
    if (k < 0) {
      if (Math.abs(k) > str.length) k += str.length;
      for (int j = Math.abs(k); j < str.length; j++) {
        System.out.print(str[j] + " ");
        str[j] = "m";
      }
    }
    for (String s : str) 
      System.out.print(s.equals("m") ? "" : s + " ");
  }
}



# C
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>

void input(int64_t** arr, size_t* N, int64_t* K);
void output(int64_t** arr, size_t N);
void puton(size_t start, size_t current, int64_t K, size_t N, int64_t** arr);
int8_t puton_check(size_t start, size_t checkpoint, int64_t K, size_t N);

int main() {
    size_t N = 0;
    int64_t K = 0;
    int64_t* array;
    input(&array, &N, &K);

    while(K < 0) K += N;
    puton(0, 0, K, N, &array);
    for (size_t i = 1; i < N; i++) {
        int8_t visited = 0;
        for (size_t j = 0; j < i; j++) {
            visited = puton_check(j, i, K, N);
            if (visited) break;
        }
        if (!visited) puton(i, i, K, N, &array);
    }

    output(&array, N);
    if (N) free(array);
    return 0;
}

int8_t puton_check(size_t start, size_t checkpoint, int64_t K, size_t N) {
    int8_t visited = 0;
    size_t current = start, next;
    do {
        next = (current + K) % N;
        if (checkpoint == next) {
            visited = 1;
            break;
        }
        current = next;
    } while (next != start);
    return visited;
}

void puton(size_t start, size_t current, int64_t K, size_t N, int64_t** arr) {
    int64_t item_current = (*arr)[current];
    size_t next = (current + K) % N;
    if (next != start) puton(start, next, K, N, &(*arr));
    (*arr)[next] = item_current;
}

void output(int64_t** arr, size_t N) {
    for (size_t i = 0; i < N; i++) {
        printf("%"PRId64, (*arr)[i]);
        if (i != N - 1) printf(" ");
    }
}

void input(int64_t** arr, size_t* N, int64_t* K) {
    int64_t num;
    (*N) = 0;
    while (scanf("%"SCNd64, &num) == 1) {
        (*N)++;
        if ((*N) == 1) (*arr) = malloc(sizeof(int64_t));
        else (*arr) = realloc((*arr), (*N) * sizeof(int64_t));
        (*arr)[(*N) - 1] = num;
    }
    (*K) = (*arr)[(*N) - 1];
    (*N)--;
    (*arr) = realloc((*arr), (*N) * sizeof(int64_t));
}



# C++
#include <string>
#include <iostream>
#include <sstream>
#include <iterator>
#include <vector>
#include <algorithm>
#include <cmath>

int main() {
    // put your code here
    std::string line;
    getline(std::cin, line);
    std::istringstream this_line(line);
    std::istream_iterator<int> begin(this_line), end;
    std::vector<int> arr(begin, end);
    
    int rotate;
    std::cin >> rotate;
    
    auto it = arr.end() - (abs(rotate) % arr.size());
    
    if(rotate < 0)
        it = arr.begin() + (abs(rotate) % arr.size());
    
    std::rotate(arr.begin(), it, arr.end());
    
    for (auto &&ptr : arr)
        std::cout << ptr << " ";
    return 0;
}


