Первоклассная задача

Преподаватель по программированию некоего Центра для одаренных детей, узнав, что его ученики знают математику 3-го класса на 97.001 процентов, решил проверить их знания по курсу математики 1-го класса. Для этого он взял за основу популярнейшую у математиков 1-го класса задачу. Первоклассник должен был продолжить следующую последовательность рядов:

1
11
21
1211
111221
312211
13112221

Входные данные
В единственной строке входного файла записаны два целых числа через пробел: x (0 <= x <= 100) - первый член последовательности и n (1 <= n <= 25).

Выходные данные
Выведите n-ый ряд x-ой последовательности.

Sample Input:
1 4

Sample Output:
1211

Напишите программу. Тестируется через stdin → stdout
Верно решили 246 учащихся
Из всех попыток 60% верных


# ruby
s = gets.chomp.split(' ')
a = s[0].split('')
n = s[1].to_i
#n = 1
#a = '13112221'.split('')
#a = '1113213211'.split('')
a.push('4')
#puts a.to_s
#a_next = '1113213211'
#a_next = '31131211131221'
s_new=''

1.upto(n-1) do |i|
    cnt = 0
    s_new=''    
    a.each_cons(2) do |v|
        if v[0] == v[1]
            cnt += 1    
        else
            s_new += (cnt+1).to_s + v[0]
            cnt = 0 
        end
        #puts v[0],v[1]
        #puts s_new
    end
    a = s_new.split('').push('4')
end    

puts s_new


# python
import re
x, n = input().split()
for _ in range(int(n) - 1):
    x = ''.join(str(len(match.group(0))) + match.group(1) for match in re.finditer(r"(\d)\1*", x))
print(x)


# JS
let [s, n] = require('fs').readFileSync(0, 'utf8').split(' ');

let scan = s => {
    let [res, tmp] = ['', s[0]];
    for (let i = 1; i < s.length; i++) {
        if (s[i-1] != s[i]) {
            res += tmp.length + tmp[0];
            tmp = '';
        }
        tmp += s[i];
    }
    res += tmp.length + tmp[0];
    return res;
}

for (let i = 2; i <= n; i++) {
    s = scan(s);
}

console.log(s);


# C#
using System;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        var input = Console.ReadLine().Split(' ').ToArray();
        string sequence = input[0];
        int n = int.Parse(input[1]);    
        for (int i = 1; i < n; i++)
        {
            sequence = GetNextSequence(sequence);
        }
        Console.WriteLine(sequence);
    }
    static string GetNextSequence(string sequence)
    {
        string result = "";
        
        char currentChar = sequence[0]; 
        int count = 1; 
        for (int i = 1; i < sequence.Length; i++)
        {
            if (sequence[i] == currentChar) 
            {
                count++;
            }
            else
            {
                result += count.ToString() + currentChar;
                currentChar = sequence[i];
                count = 1;
            }
        }   
        result += count.ToString() + currentChar; 
        
        return result; 
    }
}


# java
import java.util.Scanner;

class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        int n = scanner.nextInt(), x = scanner.nextInt();
        StringBuilder previousLine = new StringBuilder(String.valueOf(n));
        StringBuilder newLine = null;
        int counter = 0;

        for (int i = 1; i < x; i++) {
            newLine = new StringBuilder();
            for (int j = 0; j < previousLine.length(); j++) {
                counter++;
                if (j == previousLine.length() - 1 || previousLine.charAt(j) != previousLine.charAt(j + 1)) {
                    newLine.append(counter).append(previousLine.charAt(j));
                    counter = 0;
                }
            }
            previousLine = newLine;
        }

        System.out.println(newLine);
    }
}


# C
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

void input(int* x, int* n);
int dig_in_num(int x);
void init_row(int** row, int* size, int x);
void add_num_in_row(int** row, int* j, int x);
int analize_next_row_size(int** row, int size);
void next_row(int** row, int* size);
void output_row(int** row, int size);

int main() {
    int x, n;
    input(&x, &n);
    int* row = NULL;
    int size = 0;
    init_row(&row, &size, x);
    for (int i = 0; i < (n - 1); i++) next_row(&row, &size);
    output_row(&row, size);
    free(row);
    return 0;
}

void output_row(int** row, int size) {
    for (int i = 0; i < size; i++) {
        printf("%d", (*row)[i]);
    }
}

void next_row(int** row, int* size) {
    int* pre_row = malloc(*size * sizeof(int));
    for (int i = 0; i < *size; i++) {
        pre_row[i] = (*row)[i];
    }
    
    int new_size = analize_next_row_size(row, *size);
    free(*row);
    *row = malloc(new_size * sizeof(int));
    int j = 0; // индекс массива следущей последовательности

    for (int i = 0; i < *size; i++) {
        int dig = pre_row[i];
        int count = 1;
        while (pre_row[i + count] == dig && (i + count) < *size) {
            count++;
        }
        i = i + count - 1;

        // запись новой последовательности
        add_num_in_row(row, &j, count);
        (*row)[j] = dig;
        j++;
    }

    free(pre_row);
    *size = new_size;
}

int analize_next_row_size(int** row, int size) {
    int next_size = 0;
    for (int i = 0; i < size; i++) {
        int dig = (*row)[i];
        int count = 1;
        while ((*row)[i + count] == dig && (i + count) < size) {
            count++;
        }
        i = i + count - 1;
        next_size += 1 + dig_in_num(count);
    }
    return next_size;
}

void add_num_in_row(int** row, int* j, int x) {
    int digs = dig_in_num(x);
    for (int i = 0; i < digs; i++) {
        int dig = x / (int)pow(10, digs - 1 - i);
        x %= (int)pow(10, digs - 1 - i);
        (*row)[*j + i] = dig;
    }
    *j += digs;
}

void init_row(int** row, int* size, int x) {
    *size = dig_in_num(x);
    *row = malloc(*size * sizeof(int));
    for (int i = 0; i < *size; i++) {
        int dig = x / (int)pow(10, *size - 1 - i);
        x %= (int)pow(10, *size - 1 - i);
        (*row)[i] = dig;
    }
}

int dig_in_num(int x) {
    int digs = 0;
    while (x > 0) {
        x /= 10;
        digs++;
    }
    return digs;
}
    
void input(int* x, int* n) {
    scanf("%d %d", x, n);
}


# C++
#include <iostream>
int main() {
    std::string s;
    int n;
    std::cin >> s >> n;
    while (--n) {
        // std::cout << "s = " << s << "\n";
        char old = s[0];
        int i = 0;
        std::string t = "";
        for (char el : s) {
            // std::cout << "\tt = " << t << "\tel = " << el << "\ti = " << i << "\told = " << old << "\n";
            if (el != old) {
                t += std::to_string(i);
                t += old;
                i = 0;
            }
            i++;
            old = el;
        }
        t += std::to_string(i);
        t += old;
        s = t;
    }
    std::cout << s << "\n";
    return 0;
}



