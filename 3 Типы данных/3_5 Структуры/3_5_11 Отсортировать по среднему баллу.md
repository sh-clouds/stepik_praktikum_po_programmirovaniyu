Отсортировать по среднему баллу

Выведите фамилии и имена учащихся в порядке убывания их среднего балла.

Входные данные
Заданы сначала количество учащихся n, затем n строк, каждая из которых содержит фамилию, имя и три числа (оценки по трем предметам: математике, физике, информатике). Данные в строке разделены одним пробелом. Оценки принимают значение от 1 до 5.

Общее число учащихся не превосходит 100001.

Выходные данные
Необходимо вывести пары фамилия-имя по одной на строке, разделяя фамилию и имя одним пробелом. Выводить оценки не нужно. Если несколько учащихся имеют одинаковые средние баллы, то их нужно выводить в порядке, заданном во входных данных.

Sample Input:
2
Markov Valeriy 1 1 1
Ivanov Ivan 2 2 2

Sample Output:
Ivanov Ivan
Markov Valeriy

Напишите программу. Тестируется через stdin → stdout
Верно решили 234 учащихся
Из всех попыток 62% верных


# ruby
n = gets.to_i

lmax, l, x, y = 0, 0, 0, 0
a, ap, = [], []

1.upto(n) do |i|
    a = gets.split().map{|j| j.to_s }
    l = (a[2].to_i + a[3].to_i  + a[4].to_i ) / 3.0
    #print "#{l}\n"    
    a.push(n+1-i) 
    a.push(l)  
    ap.push(a.reverse)   
end

(ap.sort!).reverse!

#ap2=[]
#ap2.push(["Markov", "Valeriy", 1, 1, 1, 1, 1.0].reverse)
#ap2.push(["Ivanov", "Ivan", 2, 2, 2, 2, 2.0].reverse)
#ap2.push([2,3,1,63].reverse) 
#ap2.push([2,1,2,5].reverse) 

#(ap2.sort!).reverse!


ap.each do |j|
    x = j[6]
    y = j[5]  
    print "#{x} #{y}\n"       
end


# python
n = int(input())
arr = [input().split() for _ in range(n)]
arr = [(f'{surname} {name}', sum(map(int, ratings)) / 3) for surname, name, *ratings in arr]
sorted_arr = sorted(arr, key=lambda w: w[1], reverse=True)
print(*[full_name for full_name, _ in sorted_arr], sep='\n')


# JS
var stdin = process.openStdin();

stdin.addListener("data", function(d) {
    let str = d.toString().split('\n');
    let arr = [];
    let buffer = {};
    
    for (let i=1; i<str.length; i++) {
        let [surname, name, a, b, s] = str[i].split(' ');
        let obj = {
            name: surname+' '+name,
            average: +a + +b + +s
        }
        arr.push(obj);
        buffer[+a + +b + +s] = '';        
    }
    buffer = Object.keys(buffer);
    for (let i=buffer.length-1; i>=0; i-- )
        for (let key of arr)
            if (key.average === +buffer[i]) console.log(key.name);
  });

  
# C#
using System;
using System.Linq;
using System.Collections.Generic;
using System.Globalization;

public class MainClass
{
    public static void Main()
    {
      List<Study> study = new List <Study>();
        int check=int.Parse(Console.ReadLine());
        for (int i=0;i<check;i++)
           {
                var input=Console.ReadLine().Split(' ').ToArray();
                study.Add(new Study(input[0],input[1],(int.Parse(input[2])+int.Parse(input[3])+int.Parse(input[4]))));   
           }
        study.Sort((x,y)=>y.averade.CompareTo(x.averade));
        foreach (var best in study)
        {
        Console.WriteLine($"{best.firstName} {best.lastName}"); 
        }
    }
}
struct Study
{
    public string firstName;
    public string lastName;
    public int averade;
    
    public Study(string firstName, string lastName, int averade)
    {
        this.firstName = firstName;
        this.lastName = lastName;
        this.averade = averade;
    }   
}


# java
import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int count = Integer.parseInt(sc.nextLine());

        List<Student> students = new ArrayList<>();

        for(int a = 0; a < count; a++) {
            students.add(new Student(sc.next(), sc.next(), sc.nextInt(), sc.nextInt(), sc.nextInt()));
        }

        students.stream().sorted(new StudentComparator()).forEach(System.out::println);
    }
}

class Student {
    private String surname;
    private String name;
    private int mathematics;
    private int physics;
    private int informatics;

    public Student(String surname, String name, int mathematics, int physics, int informatics) {
        this.surname = surname;
        this.name = name;
        this.mathematics = mathematics;
        this.physics = physics;
        this.informatics = informatics;
    }

    public double calculateAverageResult() {
        return mathematics + physics + informatics;
    }

    @Override
    public String toString() {
        return String.format("%s %s", surname, name);
    }
}

class StudentComparator implements Comparator<Student> {
    public int compare(Student a, Student b) {
        double resultA = a.calculateAverageResult();
        double resultB = b.calculateAverageResult();

        if(resultA > resultB) {
            return -1;
        }
        else if(resultA < resultB) {
            return 1;
        }
        else {
            return 0;
        }
    }
}



# C
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct diary {
    char surname[32];
    char name[32];
    uint8_t math;
    uint8_t phys;
    uint8_t info;
};

void echo_double(double x, uint8_t afterdot);
size_t input(struct diary** array);
double get_m_math(struct diary** array, size_t n);
double get_m_phys(struct diary** array, size_t n);
double get_m_info(struct diary** array, size_t n);
uint8_t get_max_score(struct diary** array, size_t n);
uint8_t get_third_score(struct diary** array, size_t n);
void swap_diary(struct diary** array, size_t a, size_t b);
void sort_by_score(struct diary** array, size_t n);
void output_fullnames_with_45(struct diary** array, size_t n);
void output_fullnames_with_max(struct diary** array, size_t n);
void output_fullnames_with_score_and_more(struct diary** array, size_t n, uint8_t x);
void output_fullnames(struct diary** array, size_t n);

int main() {
    struct diary* students = NULL;
    size_t count = input(&students);
    if (count > 0) {
        sort_by_score(&students, count);
        output_fullnames(&students, count);
        free(students);
    }
    return 0;
}

void output_fullnames(struct diary** array, size_t n) {
    for (size_t i = 0; i < n; i++) {
        printf("%s %s", (*array)[i].surname, (*array)[i].name);
        if (i < n - 1) printf("\n");
    }
}
    
void output_fullnames_with_score_and_more(struct diary** array, size_t n, uint8_t x) {
    for (size_t i = 0; i < n; i++)
        if ((*array)[i].math + (*array)[i].phys + (*array)[i].info >= x)
            printf("%s %s\n", (*array)[i].surname, (*array)[i].name);
}

void output_fullnames_with_max(struct diary** array, size_t n) {
    uint8_t max = get_max_score(&(*array), n);
    for (size_t i = 0; i < n; i++)
        if ((*array)[i].math + (*array)[i].phys + (*array)[i].info == max)
            printf("%s %s\n", (*array)[i].surname, (*array)[i].name);
}

void output_fullnames_with_45(struct diary** array, size_t n) {
    for (size_t i = 0; i < n; i++)
        if ((*array)[i].math > 3 && (*array)[i].phys > 3 && (*array)[i].info > 3)
            printf("%s %s\n", (*array)[i].surname, (*array)[i].name);
}

void swap_diary(struct diary** array, size_t a, size_t b) {
    struct diary temp;
    for (size_t i = 0; i < 32; i++) temp.surname[i] = (*array)[a].surname[i];
    for (size_t i = 0; i < 32; i++) temp.name[i] = (*array)[a].name[i];
    temp.math = (*array)[a].math;
    temp.phys = (*array)[a].phys;
    temp.info = (*array)[a].info;

    for (size_t i = 0; i < 32; i++) (*array)[a].surname[i] = (*array)[b].surname[i];
    for (size_t i = 0; i < 32; i++) (*array)[a].name[i] = (*array)[b].name[i];
    (*array)[a].math = (*array)[b].math;
    (*array)[a].phys = (*array)[b].phys;
    (*array)[a].info = (*array)[b].info;

    for (size_t i = 0; i < 32; i++) (*array)[b].surname[i] = temp.surname[i];
    for (size_t i = 0; i < 32; i++) (*array)[b].name[i] = temp.name[i];
    (*array)[b].math = temp.math;
    (*array)[b].phys = temp.phys;
    (*array)[b].info = temp.info;
}

void sort_by_score(struct diary** array, size_t n) {
    uint8_t a = 0, b = 0;
    for (size_t i = 0; i < n - 1; i++) {
        for (size_t j = 0; j < n - 1 - i; j++) {
            a = (*array)[j].math + (*array)[j].phys + (*array)[j].info;
            b = (*array)[j + 1].math + (*array)[j + 1].phys + (*array)[j + 1].info;
            if (a < b) swap_diary(&(*array), j, j + 1);
        }
    }
}

uint8_t get_third_score(struct diary** array, size_t n) {
    uint8_t first = 0, second = 0, third = 0;
    for (size_t i = 0; i < n; i++) {
        uint8_t score = (*array)[i].math + (*array)[i].phys + (*array)[i].info;
        if (score > first) {
            third = second;
            second = first;
            first = score;        
        } else if (score > second) {
            third = second;
            second = first;
        } else if (score > third) {
            third = score;
        }
    }
    return third;
}

uint8_t get_max_score(struct diary** array, size_t n) {
    uint8_t max = 0;
    for (size_t i = 0; i < n; i++)
        if ((*array)[i].math + (*array)[i].phys + (*array)[i].info > max)
            max = (*array)[i].math + (*array)[i].phys + (*array)[i].info;
    return max;
}

double get_m_info(struct diary** array, size_t n) {
    double m = 0.0;
    for (size_t i = 0; i < n; i++) m += (*array)[i].info;
    return m / n;
}

double get_m_phys(struct diary** array, size_t n) {
    double m = 0.0;
    for (size_t i = 0; i < n; i++) m += (*array)[i].phys;
    return m / n;
}

double get_m_math(struct diary** array, size_t n) {
    double m = 0.0;
    for (size_t i = 0; i < n; i++) m += (*array)[i].math;
    return m / n;
}

size_t input(struct diary** array) {
    size_t n = 0;
    scanf("%zu", &n);
    (*array) = malloc(n * sizeof(struct diary));
    if ((*array) == NULL) {
        n = 0;
    } else {
        for (size_t i = 0; i < n; i++) {
            scanf("%s", &((*array)[i].surname));
            scanf("%s", &((*array)[i].name));
            scanf("%"SCNu8, &((*array)[i].math));
            scanf("%"SCNu8, &((*array)[i].phys));
            scanf("%"SCNu8, &((*array)[i].info));
        }
    }
    return n;
}
   
// до 15и значащих цифр после запятой, не больше afterdot
void echo_double(double x, uint8_t afterdot) {
    size_t maxlen = 127;
    char numstr[maxlen];
    sprintf(numstr, "%.15lf", x);
    // удаление не значащих цифр после запятой (больше afterdot)
    size_t numlen = strlen(numstr);
    uint8_t delta = 15 - afterdot;
    for (size_t i = 0; i < delta; i++)
        numstr[numlen - 1 - i] = '\0';
    // удаление не значащих нулей после запятой
    numlen = strlen(numstr);
    size_t idot = strcspn(numstr, ".");
    for (size_t i = numlen - 1; i > idot + 1; i--)
        if (numstr[i] == '0') numstr[i] = '\0';
        else break;
    printf("%s", numstr);
}


# C++
#include <iostream>
#include <string>
#include <stdlib.h>
#include <vector>

using namespace std;

typedef struct Node
{
    std::string name;
    std::string sername;
    double sr;
}Node;

typedef struct Table
{
        int size;
        Node** ks;
}Table;

Table* init(int size)
{
        Table* tabl = (Table*)calloc(1, sizeof(Table));
        tabl->ks = (Node**) calloc(size, sizeof(Node*));
        tabl->size = size;
        for(int i = 0; i < size; i++)
        {
                tabl->ks[i] = NULL;
        }
        return tabl;
}

Node* init_node(string str, string str1, double s)
{
        Node* node = (Node*)calloc(1, sizeof(Node));
        node->sr = s;
        node->name = str;
        node->sername = str1;
        return node;
}

int add(Table* tabl, Node* node, int i)
{
        tabl->ks[i] = (Node*)calloc(1, sizeof(Node));
        tabl->ks[i] = node;
        return 0;
}

void print(Table* tabl)
{
        for(int i = 0; i < tabl->size; i++)
        {
                std::cout << tabl->ks[i]->name << ' ' << tabl->ks[i]->sername << endl;
        }
}

void sort(Table* tabl)
{
        for(int i = 1; i < tabl->size; i++)
        {
                for(int j = 0; j < tabl->size - 1; j++)
                {
                        if(tabl->ks[j]->sr < tabl->ks[j + 1]->sr)
                        {
                                Node* x = tabl->ks[j];
                                tabl->ks[j] = tabl->ks[j + 1];
                                tabl->ks[j + 1] = x;
                        }
                }
        }
}

int main()
{
    int n;
    std::cin >> n;
    Table* tabl = init(n);
    for(int i = 0; i < n; i++)
    {
            string str, str1;
            std::cin >> str >> str1;
            int n, m, b;
            std::cin >> n >> m >> b;
            double sr = (double)(n + m + b) / 3;
            Node* node = init_node(str, str1, sr);
            add(tabl, node, i);
    }
    sort(tabl);
    print(tabl);
    return 0;
}
